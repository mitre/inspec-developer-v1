(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{455:function(s,n,t){"use strict";t.r(n);var e=t(65),a=Object(e.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"_9-profile-inheritance-and-overlays"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-profile-inheritance-and-overlays"}},[s._v("#")]),s._v(" 9. Profile Inheritance and Overlays")]),s._v(" "),t("p",[s._v("In addition to its own controls, an InSpec profile can bring in the controls from another InSpec profile. Additionally, when inheriting the controls of another profile, a profile can skip or even modify those included controls.")]),s._v(" "),t("p",[s._v("When a profile includes controls from another profile, it is usually referred to as a “meta profile” or a “profile overlay.” Those of us with Chef background sometimes call it a “wrapper profile”.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Further information on inheritance")]),s._v(" "),t("p",[s._v("You can find out more about inhertiance here "),t("a",{attrs:{href:"https://www.inspec.io/docs/reference/profiles/#sts=Profile%20Dependencies",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.inspec.io/docs/reference/profiles/#sts=Profile%20Dependencies"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"_9-1-defining-the-dependency"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-defining-the-dependency"}},[s._v("#")]),s._v(" 9.1. Defining the dependency")]),s._v(" "),t("p",[s._v("Before a profile can use controls from another profile, the to-be-included profile needs to be specified in the including profile’s inspec.yml file in the depends section. For each profile to be included, a location for the profile from where to be fetched and a name for the profile should be included. For example:")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("depends")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("baseline\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sec/linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("baseline/archive/master.tar.gz\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("baseline\n   "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//github.com/dev"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sec/ssh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("baseline/archive/master.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("Once defined in the inspec.yml, controls from the included profiles can be used!")]),s._v(" "),t("h3",{attrs:{id:"_9-2-including-all-controls-from-a-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-including-all-controls-from-a-profile"}},[s._v("#")]),s._v(" 9.2. Including All Controls from a Profile")]),s._v(" "),t("p",[s._v("With the include_controls command in a profile, all controls from the named profile will be executed every time the including profile is executed.")]),s._v(" "),t("p",[t("code",[s._v("my_nginx")]),s._v(" profile")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-version'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX version'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required version of NGINX should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-modules'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX modules'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required NGINX modules should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-conf'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX configuration'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The NGINX config file should owned by root, be writable only by owner, and not writeable or and readable by others.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ninclude_controls "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`my_nginx_overlay`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("code",[s._v("my_nginx_overlay")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("In the example above, every time "),t("code",[s._v("my_nginx")]),s._v(" profile is executed, all the controls from "),t("code",[s._v("my_nginx_overlay")]),s._v(" are also executed. Therefore, the following controls would be executed:")]),s._v(" "),t("ul",[t("li",[s._v("nginx-version")]),s._v(" "),t("li",[s._v("nginx-modules")]),s._v(" "),t("li",[s._v("nginx-conf")]),s._v(" "),t("li",[s._v("first-overlay-control")]),s._v(" "),t("li",[s._v("second-overlay-control")])]),s._v(" "),t("h3",{attrs:{id:"_9-3-skipping-a-control-from-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-skipping-a-control-from-profile"}},[s._v("#")]),s._v(" 9.3. Skipping a control from profile")]),s._v(" "),t("p",[s._v("What if one of the controls from the included profile does not apply to your environment? Luckily, it is not necessary to maintain a slightly-modified copy of the included profile just to delete a control. The skip_control command tells InSpec to not run a particular control.")]),s._v(" "),t("p",[t("code",[s._v("my_nginx")]),s._v(" profile")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-version'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX version'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required version of NGINX should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-modules'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX modules'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required NGINX modules should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-conf'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX configuration'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The NGINX config file should owned by root, be writable only by owner, and not writeable or and readable by others.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ninclude_controls "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`my_nginx_overlay`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  skip_control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[t("code",[s._v("my_nginx_overlay")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("In the above example, all controls from "),t("code",[s._v("my_nginx")]),s._v(" profile and "),t("code",[s._v("my_nginx_overlay")]),s._v(" profile will be executed every time my-app-profile is executed "),t("strong",[s._v("except")]),s._v(" for control "),t("code",[s._v("second-overlay-control")]),s._v(" from the "),t("code",[s._v("my_nginx_overlay")]),s._v(" profile.")]),s._v(" "),t("h3",{attrs:{id:"_9-4-modifying-a-control"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-modifying-a-control"}},[s._v("#")]),s._v(" 9.4. Modifying a Control")]),s._v(" "),t("p",[s._v("Let’s say a particular control from an included profile should still be run, but the impact isn’t appropriate? Perhaps the test should still run, but if it fails it should be treated as low severity instead of high severity?")]),s._v(" "),t("p",[s._v("When a control is included, it can also be modified!")]),s._v(" "),t("p",[t("code",[s._v("my_nginx")]),s._v(" profile")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-version'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX version'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required version of NGINX should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-modules'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX modules'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required NGINX modules should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-conf'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX configuration'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The NGINX config file should owned by root, be writable only by owner, and not writeable or and readable by others.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ninclude_controls "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`my_nginx_overlay`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("p",[t("code",[s._v("my_nginx_overlay")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("In the above example, all controls from "),t("code",[s._v("my_nginx")]),s._v(" profile are executed along with all the controls from the including profile, "),t("code",[s._v("my_nginx_overlay")]),s._v(". However, should control "),t("code",[s._v("second-overlay-control")]),s._v(" fail, it will be raised with an impact of "),t("code",[s._v("0.5")]),s._v(" instead of the originally-intended impact of "),t("code",[s._v("1.0")]),s._v(".")]),s._v(" "),t("h3",{attrs:{id:"_9-5-selectively-including-controls-from-a-profile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-selectively-including-controls-from-a-profile"}},[s._v("#")]),s._v(" 9.5. Selectively Including Controls from a Profile")]),s._v(" "),t("p",[s._v("If there are only a handful of controls that should be executed from an included profile, it’s not necessary to skip all the unneeded controls, or worse, copy/paste those controls bit-for-bit into your profile. Instead, use the require_controls command.")]),s._v(" "),t("p",[t("code",[s._v("my_nginx")]),s._v(" profile")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-version'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX version'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required version of NGINX should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-modules'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX modules'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required NGINX modules should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-conf'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX configuration'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The NGINX config file should owned by root, be writable only by owner, and not writeable or and readable by others.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nrequire_controls "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`my_nginx_overlay`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v("\n  control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`third-overlay-control`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[t("code",[s._v("my_nginx_overlay")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`third-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`fourth-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`fifth-overlay-control`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("Whenever "),t("code",[s._v("my_nginx")]),s._v(" is executed, in addition to its own controls, it will run only the controls specified in the require_controls block. In the case, the following controls would be executed:")]),s._v(" "),t("ul",[t("li",[s._v("nginx-version")]),s._v(" "),t("li",[s._v("nginx-modules")]),s._v(" "),t("li",[s._v("nginx-conf")]),s._v(" "),t("li",[s._v("first-overlay-control")]),s._v(" "),t("li",[s._v("third-overlay-control")])]),s._v(" "),t("p",[s._v("Controls "),t("code",[s._v("second-overlay-control")]),s._v(", "),t("code",[s._v("fourth-overlay-control")]),s._v(", and "),t("code",[s._v("fifth-overlay-control")]),s._v(" would not be run, just as if they were manually skipped. This method of including specific controls ensures only the controls specified are executed; if new controls are added to a later version of "),t("code",[s._v("my_nginx_overlay")]),s._v(", they would not be run.")]),s._v(" "),t("p",[s._v("And, just the way its possible to modify controls when using include_controls, controls can be modified as well.")]),s._v(" "),t("p",[t("code",[s._v("my_nginx")]),s._v(" profile")]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-version'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX version'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required version of NGINX should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-modules'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX modules'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The required NGINX modules should be installed.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nginx-conf'")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n  title "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NGINX configuration'")])]),s._v("\n  desc "),t("span",{pre:!0,attrs:{class:"token string-literal"}},[t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'The NGINX config file should owned by root, be writable only by owner, and not writeable or and readable by others.'")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\nrequire_controls "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`my_nginx_overlay`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.5")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`third-overlay-control`")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[t("code",[s._v("my_nginx_overlay")])]),s._v(" "),t("div",{staticClass:"language-ruby line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ruby"}},[t("code",[s._v("control "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`first-overlay-control`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  impact "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`second-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`third-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`fourth-overlay-control`")])]),s._v("\ncontrol "),t("span",{pre:!0,attrs:{class:"token command-literal"}},[t("span",{pre:!0,attrs:{class:"token command string"}},[s._v("`fifth-overlay-control`")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("As with the prior example, only "),t("code",[s._v("first-overlay-control")]),s._v(" and "),t("code",[s._v("third-overlay-control")]),s._v(" are executed, but if "),t("code",[s._v("first-overlay-control")]),s._v(" fails, it will report with an impact of "),t("code",[s._v("0.5")]),s._v(" instead of the originally-intended "),t("code",[s._v("1.0")]),s._v(" impact.")]),s._v(" "),t("h3",{attrs:{id:"_9-6-additional-examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-additional-examples"}},[s._v("#")]),s._v(" 9.6. Additional examples")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/mitre/helloworld-web-baseline",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/mitre/helloworld-web-baseline"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/chris-rock/acme-inspec-profile",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/chris-rock/acme-inspec-profile"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mitre/aws-rds-crunchy-data-postgresql-9-stig-baseline",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/mitre/aws-rds-crunchy-data-postgresql-9-stig-baseline"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=a.exports}}]);